<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="geo.css"/>
   
    
  </head>
<body>
<div id="trya">
<button id="try"  onclick="getLocation()">View Details</button>
</div>
<h1 id="pHead">Air Index of your Locality</h1>
<ul id="listInfo">
  <li><h2 id=co></h2></li>
  <li><h2 id=no></h2></li>
  <li><h2 id=no2></h2></li>
  <li><h2 id=o3></h2></li>
  <li><h2 id=so2></h2></li>
  <li><h2 id=nh3></h2></li>
</ul>

<script>
var x = document.getElementById("demo");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    alert("Geolocation is not supported by this browser.") ;
  }
}

function showPosition(position) {
  var latitude =  position.coords.latitude ; 
  var longitude = position.coords.longitude;
  api(longitude,longitude)
}
</script>

<script type='text/javascript'>  
  function api(latitude,longitude){

   fetch("https://api.openweathermap.org/data/2.5/air_pollution?lat="+latitude+"&lon="+longitude+"&appid=b87680397fcbbda1aecc099964c05dbd")
     .then(function (response) {
       return response.json();
     })
     .then(function (myJson) {
       document.querySelector("#co").innerHTML = "Co : "+myJson.list[0].components.co+"ppm";
       document.querySelector("#no").innerHTML = "No : "+myJson.list[0].components.no+"ppm";
       document.querySelector("#no2").innerHTML = "No2 : "+myJson.list[0].components.no2+"ppm";
       document.querySelector("#o3").innerHTML = "o3 : "+myJson.list[0].components.o3+"ppm";
       document.querySelector("#so2").innerHTML = "So2 : "+myJson.list[0].components.so2+"ppm";
       document.querySelector("#nh3").innerHTML = "Nh3 : "+myJson.list[0].components.nh3+"ppm";
     })
     .catch(function (error) {
       console.log("Error: " + error);
     });
  }
</script>

</body>
</html>
